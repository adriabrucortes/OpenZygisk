<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no"/>
    <meta name="renderer" content="webkit"/>
    <link href='https://fonts.googleapis.com/css?family=Open Sans' rel='stylesheet'>

    <!-- Filled icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- Outlined icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- Rounded icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">

    <!-- Sharp icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">

    <!-- Two Tone icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Two+Tone" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/mdui@2/mdui.css">
    <script src="https://unpkg.com/mdui@2/mdui.global.js"></script>

    <!-- If using the component's icon attribute, also need to include the icon's CSS file -->
    <mdui-top-app-bar style="position: relative;">

        <mdui-top-app-bar-title>OpenZygisk</mdui-top-app-bar-title>
        <mdui-dropdown>
            <mdui-button-icon slot="trigger" icon="more_vert"></mdui-button-icon>

            <mdui-menu selects="single" value="auto" class="menu">
                <mdui-menu-item value="light">Light</mdui-menu-item>
                <mdui-menu-item value="dark">Dark</mdui-menu-item>
                <mdui-divider></mdui-divider>
                <mdui-menu-item value="auto">System</mdui-menu-item>
            </mdui-menu>
        </mdui-dropdown>

    </mdui-top-app-bar>
    <style>
        body {
            font-family: 'Open Sans';
            font-size: 14px; /* Normalized text size */
        }
        .force-denylist {
            margin: 20px 0;
            font-family: 'Open Sans', sans-serif;
        }
        .switch-container {
            display: flex;
            align-items: center;
        }
        .switch-label {
            margin-top: 0px;
            margin-left: 10px;
            margin-right: 10px;
            font-size: 16px;
        }
        .container {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            margin-bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <mdui-list>
            <mdui-list-item>I don't know</mdui-list-item>
        </mdui-list>
    </div>
    <div class="container">
        <mdui-list>
            <mdui-list-item>Root implementation - 😊</mdui-list-item>
            <mdui-list-item>Tracer - 😊</mdui-list-item>
            <mdui-list-item>Daemon - 😊</mdui-list-item>
            <mdui-list-item>Zygote - 😊</mdui-list-item>
        </mdui-list>
    </div>
    <div class="container">
        <mdui-list>
            <!-- Add module list items here -->
        </mdui-list>
    </div>
    <div class="container">
        <div class="switch-container">
            <div class="switch-label">Enforce denylist</div>
            
            <mdui-switch checked=true style="margin-top: 0px" ></mdui-switch>
        </div>
    </div>

</body>

<script>
    const witch = document.querySelector('mdui-switch');
    console.log(witch)
    // Set JavaScript property
    witch.variant = 'outlined';
    witch.addEventListener('click', () => {
        //console.log('Event triggered when dialog starts opening');
        //alert('Art')
        console.log(witch.checked)
        if (witch.checked) {
            info = ksu.exec('echo 1 >> /data/adb/modules/zygisksu/noable'); // Close button
            //alert(info);
        } else {
            info = ksu.exec('rm /data/adb/modules/zygisksu/noable'); // Open button
            //alert(info);
        }
    });
    // Read JavaScript property
    console.log(witch.variant); // outlined
    const div = document.querySelectorAll('div');
    //div[2].innerHTML="<mdui-list-item>LSPosed                 - 😊</mdui-list-item>\n<mdui-list-item>LSPosed                 - 😊</mdui-list-item>"
    const item = document.querySelectorAll('mdui-list-item');
    const menu_item = document.querySelectorAll('mdui-menu-item');
    menu_item[0].addEventListener('click', () => {
        // Light mode
        const html = document.querySelectorAll('html');
        html[0].setAttribute("class", "mdui-theme")
    });
    menu_item[1].addEventListener('click', () => {
        // Dark mode
        const html = document.querySelectorAll('html');
        html[0].setAttribute("class", "mdui-theme-dark")
    });
    menu_item[2].addEventListener('click', () => {
        // Auto mode
        const html = document.querySelectorAll('html');
        html[0].setAttribute("class", "mdui-theme-auto")
    });

    // item[1].textContent='1.0-RC2(245)';
    try {
        info = ksu.exec('/data/adb/modules/zygisksu/bin/zygiskd64 version');
        item[1].textContent = info;
        info = ksu.exec('cat /data/adb/modules/zygisksu/noable');
        if (info != "") {
            witch.checked = false;
        }
        info = ksu.exec('cat /data/adb/modules/zygisksu/info.json');
        //alert(info)
        //var info = '{"a":0,"b":0,"p32":0,"p64":0}'
        list = JSON.parse(info)
        switch (list.a) {
            case 0:
                item[3].textContent = "Root implementation - 😊Working";
                break
            case 1:
                item[3].textContent = "Root implementation - ❌Stopped";
                break
            case 2:
                item[3].textContent = "Root implementation - ❌Exited";
                break
        }
        switch (list.a) {
            case 0:
                item[4].textContent = "Zygote - 😊Working";
                break
            case 1:
                item[4].textContent = "Zygote - ❌Stopped";
                break
            case 2:
                item[4].textContent = "Zygote - ❌Exited";
                break
        }
        switch (list.p32) {
            case 0:
                item[5].textContent = "Zygote32 - 😊Working";
                break
            case 1:
                item[5].textContent = "Zygote32 - ❌Stopped";
                break
            case 2:
                item[5].textContent = "Zygote32 - ❌Exited";
                break
        }
        switch (list.p64) {
            case 0:
                item[6].textContent = "Zygote64 - 😊Working";
                break
            case 1:
                item[6].textContent = "Zygote64 - ❌Stopped";
                break
            case 2:
                item[6].textContent = "Zygote64 - ❌Exited";
                break
        }
        var mod = "Root: Apatch,module(1): zygisk_lsposed"
        mod = list.in64
        list = mod.split(":")[2]
        mod = list.split(",")
        modlist = ""
        for (i = 0; i < mod.length; i++) {
            modlist += "<mdui-list-item>" + mod[i] + "- 😊 </mdui-list-item>"
        }
        div[2].innerHTML = modlist

    } catch (i) {
        item[1].textContent = i;
        //item[3].textContent=i;
        //item[4].textContent=i;
        //item[5].textContent=i;
        //item[6].textContent=i;
    }
</script>

</html>
